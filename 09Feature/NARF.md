# 1、 法线对齐的径向特征(Normal Aligned Radial Feature, NARF)
NARF 是一种3D特征点检测和描述算法。3D 点云关键点检测和描述子计算，
是用于部分遮挡、稀疏或不规则点云，尤其是轮廓/边缘明显的物体。

基本流程：
- 利用深度图的边界点 作为关键点（keypoints）
- 在关键点周围建立 法线对齐的局部坐标系
- 从关键点出发，计算其邻域的 径向深度变化模式（类似于从中心向四周扫描的轮廓）
- 将该径向变化模式编码成 一维特征向量，作为点的描述子

这样得到的 NARF 特征对 旋转、尺度变化有一定鲁棒性，并且能较好区分不同物体的局部几何形状。

特性：
- 关键点检测：NARF 关注点云的几何边缘（range image 边缘）
- 旋转不变性：通过局部坐标系对齐法线
- 全局或局部特征：描述局部区域的形状信息

# 2、 NARF的优缺点
优点：
- 对旋转和尺度变化具有鲁棒性（因为法线对齐 + 径向描述）
- 只需利用深度图即可，不依赖纹理
- 特征表达了 边界轮廓，适合物体识别

缺点:
- 计算复杂度相对高
- 对点云噪声、遮挡比较敏感（尤其是边界检测）
- 特征是 一维径向编码，有时区分能力不如 FPFH、SHOT 等 3D 局部描述子

# 3、算法流程
## 3.1 生成深度图（Range Image）
- 输入点云数据，先转化为一个深度图（range image）,即:
    - 每个像素代表一个方向（θ, φ）
    - 存储该方向上最近点的深度值
    - 未观测到点的地方为无效值

这样可以更方便地进行**邻域分析**和**边界检测**。

## 3.2 关键点检测（Keypoint Detection）
- NARF 特征通常以边界点作为关键点
- 在深度图上找出物体与背景的边界（range discontinuities）
- 关键点是位于边界或高曲率位置的点

## 3.3 建立局部坐标系（Normal Alignment）
- 对关键点，估计其法向量
- 构建局部坐标系，使得 z 轴对齐法向量
- 这样做的目的是保证描述子 对旋转具有不变性

## 3.4 径向特征提取（Radial Feature Extraction）
- 以关键点为中心，定义多个径向方向（例如划分 360° 角度区间）
- 沿每个径向方向，计算点的深度变化
- 具体计算方式:
    - 从中心出发，沿方向 d 搜索相交点
    - 记录第一个有效点的深度值
    - 若该方向无点 → 记为无效值
- 得到一个**径向深度分布**

## 3.5 特征编码
- 将径向分布转化为**一维向量**
- 向量内容通常包括:
    - 每个方向上的深度值
    - 邻域的强度变化
    - 归一化处理（保证尺度不变性）
- 最终输出的就是**NARF描述子向量**，一般维度为**36、72**或更高（取决于径向分割数）
